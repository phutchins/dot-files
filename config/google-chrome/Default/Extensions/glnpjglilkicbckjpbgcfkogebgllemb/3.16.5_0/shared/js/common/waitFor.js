function _doWait(c,a,b){if(c.condition()){Log.debug("condition met - returning success");c.success()}else{if(new Date().getTime()>a){Log.debug("timedout!");c.timedout()}else{setTimeout(function(){_doWait(c,a,b)},b)}}}function waitFor(d){var c=new Date();var a=c.getTime()+d.timeout;var b=d.delay?d.delay:500;Log.debug("Preparing to enter wait of "+d.timeout+"ms with "+b+"ms delay");_doWait(d,a,b)};